name: fidel

services:
  api:
    build:
      context: .
      dockerfile: docker/Dockerfile.cpu
    env_file: .env
    environment:
      # Ensure CORS allows the WebUI origin
      - ALLOW_ORIGINS=http://localhost:2345
    ports:
      - "7890:7890"
    networks: [appnet]
    healthcheck:
      test: ["CMD", "curl", "-fsS", "http://localhost:7890/health"]
      interval: 30s
      timeout: 3s
      retries: 5

networks:
  appnet: {}

volumes:
  webui_data: {}
